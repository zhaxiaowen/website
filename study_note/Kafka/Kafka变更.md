# Kafka常见变更

#### 迁移上云

| 方案            | 步骤                                                         | 优劣                                                         |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 单写双消费      | 1.新建一套消费者<br />2.生产者切流到CKafka<br />3.旧消费者消费剩余数据;新消费者消费ckafka集群 | 优点：整体迁移流程简单清晰便于操作，无数据积压，平滑过渡。<br />缺点：需要额外多起一套消费者。 |
| 单写单消费      | 1.新建CKafka集群<br />2.生产者切流到CKafka集群<br />3.消费者消费完剩余数据<br />4.消费者切流消费CKafka | 优点：整体迁移流程简单清晰便于操作，过渡平滑。<br />缺点：在生产切到 CKafka 集群后，旧消费切到 CKafka 集群之前， CKafka 集群会存在一定量的堆积。 |
| Mirrormaker迁移 | 1.将自建kafka存量数据迁移到CKafka<br />2.数据迁移完成后,切生产者和消费者到CKafka集群 | 优点：整体迁移流程简单清晰便于操作、可以把历史数据同步到 CKafka 集群。<br />缺点：消费者切换到目的集群上需要从头开始消费，需要做好消费幂等。 |

